<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.dao.UserMapper">


    <!-- 关联查询sql -->
    <select id="selectPage" parameterType="com.demo.dao.entity.User" resultType="com.demo.dao.entity.User">
        SELECT * FROM user
        <where>
            <if test="id != null">
                AND id = #{id}
            </if>
            <if test="roleId != null">
                AND role_id = #{roleId}
            </if>
            <if test="accountNo != null">
                AND account_no = #{accountNo}
            </if>
            <if test="password != null">
                AND password = #{password}
            </if>
            <if test="sex != null">
                AND sex = #{sex}
            </if>
            <if test="phone != null">
                AND phone = #{phone}
            </if>
            <if test="status !=null">
                AND status = #{status}
            </if>
            <if test="remark !=null">
                AND remark = #{remark}
            </if>
            <if test="createTime !=null">
                AND create_time = #{createTime}
            </if>
            <if test="updateTime!=null">
                AND update_time = #{updateTime}
            </if>
        </where>
    </select>

    <select id="selectUser" parameterType="int" resultType="com.demo.dao.entity.User">
        SELECT * FROM user
        <where>
            <if test="id != null">
                AND id = #{id}
            </if>
        </where>
    </select>


    <update id="updateStatus" parameterType="com.demo.dao.entity.User">
        update user
        set status= #{status},
            updateTime=#{updateTime}
        where id = #{id};
    </update>

    <delete id="deleteById" parameterType="com.demo.dao.entity.User">
        delete
        from user
        where id = #{id};
    </delete>


    <update id="updateById" parameterType="com.demo.dao.entity.User">
        update user
        set account_no= #{accountNo},
            username= #{userName},
            sex= #{sex},
            phone= #{phone},
            role_id= #{roleId},
            updateTime=#{updateTime}
        where id = #{id};
    </update>

    <insert id="insertUser" parameterType="com.demo.dao.entity.User">
        insert into user (role_id, username, password, account_no, sex, phone, status, create_time)
        values (#{roleId}, #{userName}, #{password}, #{accountNo}, #{sex}, #{phone}, #{status}, #{createTime});
    </insert>

    <select id="selectByUsername" resultType="com.demo.dao.entity.User">
        select *
        from user
        where username = #{userName};
    </select>
    <!--    &lt;!&ndash; 分页查询 &ndash;&gt;-->
    <!--    <select id="listPage" resultType="com.egao.common.system.entity.DictionaryData">-->
    <!--        <include refid="relSelect"></include>-->
    <!--    </select>-->

    <!--    &lt;!&ndash; 查询全部 &ndash;&gt;-->
    <!--    <select id="listAll" resultType="com.egao.common.system.entity.DictionaryData">-->
    <!--        <include refid="relSelect"></include>-->
    <!--    </select>-->


</mapper>
